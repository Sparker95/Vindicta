{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Compile with SQF-VM",
            "type": "process",
            "command": "sqfvm.exe",
            "args": [
                "-a",
                "--parse-only",
                "--load", "./../../Project_0.Altis",
                "-i", "${file}"
                //"./../../${relativeFile}" 
            ],
            "options": {
                "cwd": "${workspaceRoot}/tools/SQF-VM"
            },
            "group": "build",
            "presentation": {
                // Reveal the output only if unrecognized errors occur.
                "reveal": "silent"
            },
            "problemMatcher":
            {
                "owner": "sqf",
                "fileLocation": ["absolute"],//, "${workspaceFolder}"],
                "pattern": [
                    {
                        "regexp": "^\\[(RNT|WRN|ERR)\\]\\[L(.+)\\|C(.+)\\|(.*?)\\]  (.*)$",
                        "line": 2,
                        "column": 3,
                        "severity": 1,
                        "file": 4,
                        "message": 5
                    }
                ]
            }
        },
        {
            "label": "Run with SQF-VM (usually won't work due to unimplemented functions)",
            "type": "process",
            "command": "sqfvm.exe",
            "args": [
                "-a",
                "--load", "./../../Project_0.Altis",
                "-i", "${file}"
            ],
            "options": {
                "cwd": "${workspaceRoot}/tools/SQF-VM"
            },
            "group": "build",
            "presentation": {
                "reveal": "always"
            },
            "problemMatcher":
            {
                "owner": "sqf",
                "fileLocation": ["absolute"],
                "pattern": [
                    {
                        "regexp": "^\\[(RNT|WRN|ERR)\\]\\[L(.+)\\|C(.+)\\|(.*?)\\]  (.*)$",
                        "line": 2,
                        "column": 3,
                        "severity": 1,
                        "file": 4,
                        "message": 5
                    }
                ]
            }
        },
        {
            "label": "Preprocess with SQF-VM",
            "type": "process",
            "command": "sqfvm.exe",
            "args": [
                "-a",
                "--load", "./../../Project_0.Altis",
                "-E", "${file}"
            ],
            "options": {
                "cwd": "${workspaceRoot}/tools/SQF-VM"
            },
            "group": "build",
            "presentation": {
                "reveal": "always"
            },
            "problemMatcher":
            {
                "owner": "sqf",
                "fileLocation": ["absolute"],
                "pattern": [
                    {
                        "regexp": "^\\[(RNT|WRN|ERR)\\]\\[L(.+)\\|C(.+)\\|(.*?)\\]  (.*)$",
                        "line": 2,
                        "column": 3,
                        "severity": 1,
                        "file": 4,
                        "message": 5
                    }
                ]
            }
        },
        {
            "label": "Pretty print with SQF-VM (not working)",
            "type": "process",
            "command": "sqfvm.exe",
            "args": [
                "-a",
                "--load", "./../../Project_0.Altis",
                "--pretty-print", "${file}" 
                //"--pretty-print", "./../../${relativeFile}" 
            ],
            "options": {
                "cwd": "${workspaceRoot}/tools/SQF-VM"
            },
            "group": "build",
            "presentation": {
                "reveal": "always"
            },
            "problemMatcher":
            {
                "owner": "sqf",
                "fileLocation": ["absolute"],
                "pattern": [
                    {
                        "regexp": "^\\[(RNT|WRN|ERR)\\]\\[L(.+)\\|C(.+)\\|(.*?)\\]  (.*)$",
                        "line": 2,
                        "column": 3,
                        "severity": 1,
                        "file": 4,
                        "message": 5
                    }
                ]
            }
        },
        {
            "label": "SQF Linter",
            "type": "process",
            "command": "${workspaceRoot}/tools/Python3/Scripts/python.exe",
            "args": [
                "sqf_linter.py"
            ],
            "options": {
                "cwd": "${workspaceRoot}/tools"
            },
            "group": "build",
            "presentation": {
                // Reveal the output only if unrecognized errors occur.
                "reveal": "always"
            },
            "problemMatcher":
            {
                "owner": "sqf",
                "fileLocation": ["absolute"],//, "${workspaceFolder}"],
                "pattern": [
                    {
                        "regexp": "^\\[(RNT|WRN|ERR)\\]\\[L(.+)\\|C(.+)\\|(.*?)\\]  (.*)$",
                        "line": 2,
                        "column": 3,
                        "severity": 1,
                        "file": 4,
                        "message": 5
                    }
                ]
            }
        },
        {
            "label": "SQF Validator",
            "type": "process",
            "command": "${workspaceRoot}/tools/Python3/Scripts/python.exe",
            "args": [
                "-m", 
                "sqf_validator.py"
            ],
            "options": {
                "cwd": "${workspaceRoot}/tools"
            },
            "group": "build",
            "presentation": {
                // Reveal the output only if unrecognized errors occur.
                "reveal": "always"
            },
            "problemMatcher":
            {
                "owner": "sqf",
                "fileLocation": ["absolute"],//, "${workspaceFolder}"],
                "pattern": [
                    {
                        "regexp": "^\\[(RNT|WRN|ERR)\\]\\[L(.+)\\|C(.+)\\|(.*?)\\]  (.*)$",
                        "line": 2,
                        "column": 3,
                        "severity": 1,
                        "file": 4,
                        "message": 5
                    }
                ]
            }
        }
        // {
        //     "label": "Run in SQF-VM",
        //     "type": "process",
        //     "command": ".\\tools\\sqf-vm-compile.bat",
        //     "args": [
        //         "${relativeFile}"
        //     ],
        //     "group": "build",
        //     "presentation": {
        //         // Reveal the output only if unrecognized errors occur.
        //         "reveal": "silent"
        //     },
        //     "problemMatcher":
        //     {
        //         "owner": "sqf",
        //         "fileLocation": ["absolute"],
        //         "pattern": [
        //             {
        //                 "regexp": "^\\[(RNT|WRN|ERR)\\]\\[L(.*)\\|C(.*)\\]  (.*)$",
        //                 "line": 2,
        //                 "column": 3,
        //                 "severity": 1,
        //                 "message": 4
        //             },
        //             {
        //                 "regexp": "In file\\:  (.*)$",
        //                 "file": 1,
        //             }
        //         ]
        //     }
        // }
    ]
}